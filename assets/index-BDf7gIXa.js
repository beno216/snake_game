(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))y(o);new MutationObserver(o=>{for(const n of o)if(n.type==="childList")for(const f of n.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&y(f)}).observe(document,{childList:!0,subtree:!0});function h(o){const n={};return o.integrity&&(n.integrity=o.integrity),o.referrerPolicy&&(n.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?n.credentials="include":o.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function y(o){if(o.ep)return;o.ep=!0;const n=h(o);fetch(o.href,n)}})();const C=new Image;C.src="img/apple.png";const R=new Image;R.src="img/snake_head.png";const s=document.querySelector("canvas"),q=document.querySelector("h1"),i=s.getContext("2d"),O=document.getElementById("audio"),W=document.getElementById("gameOverSound");O.volume=.1;O.play();let L=!0;const j=10,e=30,v=s.width/e,I=s.height/e;let S=0,X=e,l=0,a=Math.floor(s.height/2/e)*e,d=1,u=0,m=[],T=4,A=!1,g=0,w=0,Y=0;C.onload=z;R.onload=z;function z(){Y++,Y===2&&(N(),B())}let b=[];const D=40,F=30;let E=0;function B(){L&&(A||(U(),G()),K(),setTimeout(B,Math.max(1e3/(j+S),100)))}function U(){l+=X*d,a+=X*u,l>=s.width&&(l=0),l<0&&(l=s.width-e),a>=s.height&&(a=0),a<0&&(a=s.height-e);for(const t of b)if(l<t.x+t.w&&l+e>t.x&&a<t.y+t.h&&a+e>t.y){L=!1,_();return}m.forEach(t=>{l===t.x&&a===t.y&&(L=!1,_())}),m.push({x:l,y:a}),l===g&&a===w&&(S++,q.textContent=S,T++,N()),m=m.slice(-T)}function G(){if(E++,E>F){const t=H();t&&b.push(t),E=0}b=b.filter(t=>(t.timer++,t.timer<=D))}function H(){const h=Math.min(2+Math.floor(S/3),6),y=100;let o=0,n=!1,f,c,p,x;for(;!n&&o<y;){o++,Math.random()<.5?(p=h*e,x=e,f=Math.floor(Math.random()*(v-h))*e,c=Math.floor(Math.random()*I)*e):(p=e,x=h*e,f=Math.floor(Math.random()*v)*e,c=Math.floor(Math.random()*(I-h))*e);let M=!1;if(l<f+p&&l+e>f&&a<c+x&&a+e>c&&(M=!0),!M){for(const P of m)if(P.x<f+p&&P.x+e>f&&P.y<c+x&&P.y+e>c){M=!0;break}}!M&&g<f+p&&g+e>f&&w<c+x&&w+e>c&&(M=!0),M||(n=!0)}return n?{x:f,y:c,w:p,h:x,timer:0}:null}function K(){k("white",0,0,s.width,s.height),J(),i.drawImage(C,g,w,e,e);for(const r of b)k("#333",r.x,r.y,r.w,r.h);m.forEach(r=>{k("#7393B3",r.x,r.y,e,e)}),i.save(),i.translate(l+e/2,a+e/2);let t=0;u===-1?t=-Math.PI/2:u===1?t=Math.PI/2:d===-1?t=Math.PI:d===1&&(t=0),i.rotate(t),i.drawImage(R,-30/2,-30/2,e,e),i.restore(),A&&(i.fillStyle="rgba(0,0,0,0.7)",i.fillRect(0,s.height/2-40,s.width,80),i.fillStyle="#fff",i.font="bold 48px sans-serif",i.textAlign="center",i.fillText("PAUSE",s.width/2,s.height/2+15))}function k(t,r,h,y,o){i.fillStyle=t,i.fillRect(r,h,y,o)}function N(){T===v*I&&(L=!1,_());do g=Math.floor(Math.random()*v)*e,w=Math.floor(Math.random()*I)*e;while(g===l&&w===a||m.some(t=>t.x===g&&t.y===w))}function _(){O.pause(),O.currentTime=0,W.play(),q.innerHTML=`
           <img src="https://i.scdn.co/image/ab67616d0000b27324ad87f6af0c9ec809c102e5" alt="game over" style="width:120px;display:block;margin:0 auto 10px;" />
           <strong>${S}</strong><br>Press _ any _ key _ to _ restart
         `,L=!1}function $(t){if(t.code==="Space"){A=!A;return}switch(t.key){case"ArrowLeft":d!==1&&(d=-1,u=0);break;case"ArrowUp":u!==1&&(d=0,u=-1);break;case"ArrowRight":d!==-1&&(d=1,u=0);break;case"ArrowDown":u!==-1&&(d=0,u=1);break;default:L||location.reload();break}}document.addEventListener("keydown",$);function J(){for(let t=0;t<v;t++)for(let r=0;r<I;r++)k("#000",e*t,e*r,e-1,e-1)}
